<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>é›»å½±å¾Œå°ç®¡ç†</title>
  <style>
    body { font-family: Arial; padding: 20px; }
    .movie-card {
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 12px;
      margin-bottom: 20px;
      background-color: #f9f9f9;
    }
    label { display: block; margin-top: 8px; font-weight: bold; }
    input, textarea {
      width: 100%;
      margin-top: 2px;
      padding: 6px;
      box-sizing: border-box;
    }
    button {
      margin-top: 10px;
      padding: 6px 12px;
      font-weight: bold;
    }
    h2 { border-bottom: 2px solid #ccc; padding-bottom: 4px; }
  </style>
</head>
<body>
  <h1>ç‡Ÿé‹äººå“¡å¾Œå°ï¼šé›»å½±ç·¨è¼¯ç®¡ç†</h1>

  <!-- æ–°å¢é›»å½±è¡¨å–® -->
  <div class="movie-card">
    <h2>â• æ–°å¢é›»å½±</h2>
    <label>atmovies_idï¼š
      <input type="text" id="new-atmovies_id">
    </label>
    <label>imdb_idï¼š
      <input type="text" id="new-imdb_id">
    </label>
    <label>ä¸­æ–‡ç‰‡åï¼š
      <input type="text" id="new-title_zh">
    </label>
    <label>è‹±æ–‡ç‰‡åï¼š
      <input type="text" id="new-title_en">
    </label>
    <label>åˆ†ç´šï¼š
      <input type="text" id="new-classification">
    </label>
    <label>ç‰‡é•·ï¼ˆåˆ†é˜ï¼‰ï¼š
      <input type="number" id="new-length">
    </label>
    <label>ç°¡ä»‹ï¼š
      <textarea id="new-summary" rows="4"></textarea>
    </label>
    <button onclick="addMovie()">æ–°å¢é›»å½±</button>
  </div>

  <!-- ç¾æœ‰é›»å½±åˆ—è¡¨ -->
  <h2>ğŸ¬ æ‰€æœ‰é›»å½±</h2>
  <div id="movies-container">è¼‰å…¥ä¸­...</div>

  <script>
    async function fetchMovies() {
      const container = document.getElementById("movies-container");
      container.innerHTML = "è¼‰å…¥ä¸­...";
      try {
        const response = await fetch('https://your-api-url.com/movies'); // æ›¿æ›ä½ çš„ API
        const movies = await response.json();
        container.innerHTML = "";

        movies.forEach(movie => {
          const div = document.createElement("div");
          div.className = "movie-card";
          div.innerHTML = `
            <label>ä¸­æ–‡ç‰‡åï¼š
              <input type="text" id="title_zh-${movie.atmovies_id}" value="${movie.title_zh}">
            </label>
            <label>è‹±æ–‡ç‰‡åï¼š
              <input type="text" id="title_en-${movie.atmovies_id}" value="${movie.title_en}">
            </label>
            <label>åˆ†ç´šï¼š
              <input type="text" id="class-${movie.atmovies_id}" value="${movie.classification}">
            </label>
            <label>ç‰‡é•·ï¼ˆåˆ†é˜ï¼‰ï¼š
              <input type="number" id="length-${movie.atmovies_id}" value="${movie.length}">
            </label>
            <label>ç°¡ä»‹ï¼š
              <textarea id="summary-${movie.atmovies_id}" rows="4">${movie.summary}</textarea>
            </label>
            <button onclick="updateMovie('${movie.atmovies_id}')">å„²å­˜</button>
            <button onclick="deleteMovie('${movie.atmovies_id}')" style="margin-left: 10px; background-color: red; color: white;">åˆªé™¤</button>

          `;
          container.appendChild(div);
        });
      } catch (error) {
        container.innerHTML = "è¼‰å…¥å¤±æ•—ï¼š" + error.message;
      }
    }

    async function updateMovie(id) {
      const data = {
        title_zh: document.getElementById(`title_zh-${id}`).value,
        title_en: document.getElementById(`title_en-${id}`).value,
        classification: document.getElementById(`class-${id}`).value,
        length: parseInt(document.getElementById(`length-${id}`).value),
        summary: document.getElementById(`summary-${id}`).value
      };

      try {
        const response = await fetch(`https://your-api-url.com/movies/${id}`, {
          method: 'PUT',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });
        if (!response.ok) throw new Error("å„²å­˜å¤±æ•—");
        alert("å„²å­˜æˆåŠŸï¼");
      } catch (err) {
        alert("éŒ¯èª¤ï¼š" + err.message);
      }
    }

    async function addMovie() {
      const data = {
        atmovies_id: document.getElementById("new-atmovies_id").value,
        imdb_id: document.getElementById("new-imdb_id").value,
        title_zh: document.getElementById("new-title_zh").value,
        title_en: document.getElementById("new-title_en").value,
        classification: document.getElementById("new-classification").value,
        length: parseInt(document.getElementById("new-length").value),
        summary: document.getElementById("new-summary").value
      };

      try {
        const response = await fetch('https://your-api-url.com/movies', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });
        if (!response.ok) throw new Error("æ–°å¢å¤±æ•—");
        alert("æ–°å¢æˆåŠŸï¼");
        fetchMovies(); // é‡æ–°è¼‰å…¥åˆ—è¡¨
      } catch (err) {
        alert("éŒ¯èª¤ï¼š" + err.message);
      }
    }

    async function deleteMovie(id) {
    if (!confirm(`ç¢ºå®šè¦åˆªé™¤é›»å½±ï¼ˆID: ${id}ï¼‰å—ï¼Ÿ`)) return;

    try {
      const response = await fetch(`https://your-api-url.com/movies/${id}`, {
        method: 'DELETE'
      });
      if (!response.ok) throw new Error("åˆªé™¤å¤±æ•—");
      alert("åˆªé™¤æˆåŠŸï¼");
      fetchMovies(); // é‡æ–°è¼‰å…¥
    } catch (err) {
      alert("éŒ¯èª¤ï¼š" + err.message);
    }
  }
    window.addEventListener('DOMContentLoaded', fetchMovies);
  </script>
</body>
</html>
